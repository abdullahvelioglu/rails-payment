%section#content-details.row.clearfix
  %article#details-article.col-sm-8
    %h1#article-title
      Your Product
      %span.font-weight-light Product Name
    %p Lorem ipsum dolor sit amet, in nam feugiat eleifend. Sea an possit offendit definiebas, usu cu aeque mediocritatem. Vis constituam suscipiantur ad, cum duis concludaturque no. Sea vocent consulatu at.
    %p Lorem ipsum dolor sit amet, pri id tractatos torquatos, eruditi alienum eam ad. Sint graeci mel te. Ex eius corrumpit.
    %p
      %strong What You Get
    %ul.no-indent
      %li Lorem ipsum dolor sit.
      %li Lorem ipsum dolor sit amet, cum.
      %li Lorem ipsum dolor sit amet, quo ne etiam.
  %aside#details-aside.col-sm-4
    = form_tag charges_path, id:'chargeForm' do
      - if flash[:error].present?
        #error_explanation
          %p= flash[:error]
      %script{:src => "https://checkout.stripe.com/checkout.js"}
      = hidden_field_tag 'stripeToken'
      = hidden_field_tag 'amount', 499
      = hidden_field_tag 'stripeEmail'
      %button#btn-buy.btn.btn-success.btn-lg.btn-block{:type => "button"}
        %span.glyphicon.glyphicon-ok>
        Buy this!
      :javascript
        var handler = StripeCheckout.configure({
              key: '#{Rails.configuration.stripe[:publishable_key]}',
              token: function(token, arg) {
                document.getElementById("stripeToken").value = token.id;
                document.getElementById("stripeEmail").value = token.email;
                document.getElementById("chargeForm").submit();
              }
        });
        document.getElementById('btn-buy').addEventListener('click', function(e) {
              handler.open({
                name: 'Rails Payment',
                description: 'Buy this item for ($4.99)',
                amount: document.getElementById("amount").value
            });
            e.preventDefault();
           })
    %ul#details-infobox.list-group
      %li.list-group-item.active.clearfix Info
      %li.list-group-item What You Get
      %li.list-group-item This Is Included
